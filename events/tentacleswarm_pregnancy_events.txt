namespace = tentacleswarm_pregnancy
#0001-0009月度结算
#4001触手分娩

#月度结算
tentacleswarm_pregnancy.0001 = { #第一月没有效果
	hidden = yes
	immediate = {
		change_variable = {
			name = tentacle_pregnancy_month
			add = 1
		}
		trigger_event = {
			id = tentacleswarm_pregnancy.0002
			months = 1
		}
	}
}
tentacleswarm_pregnancy.0002 = { #第二月显露身孕
	hidden = yes
	immediate = {
		change_variable = {
			name = tentacle_pregnancy_month
			add = 1
		}
		add_trait = pregnant 
		trigger_event = {
			id = tentacleswarm_pregnancy.0003
			months = 1
		}
	}
}
tentacleswarm_pregnancy.0003 = { #第三月
	hidden = yes
	immediate = {
		change_variable = {
			name = tentacle_pregnancy_month
			add = 1
		}
		trigger_event = {
			id = tentacleswarm_pregnancy.0004
			months = 1
		}
	}
}
tentacleswarm_pregnancy.0004 = { #第四月
	hidden = yes
	immediate = {
		change_variable = {
			name = tentacle_pregnancy_month
			add = 1
		}
		trigger_event = {
			id = tentacleswarm_pregnancy.0005
			months = 1
		}
	}
}
tentacleswarm_pregnancy.0005 = { #第五月
	hidden = yes
	immediate = {
		change_variable = {
			name = tentacle_pregnancy_month
			add = 1
		}
		trigger_event = {
			id = tentacleswarm_pregnancy.0006
			months = 1
		}
	}
}
tentacleswarm_pregnancy.0006 = { #第六月
	hidden = yes
	immediate = {
		change_variable = {
			name = tentacle_pregnancy_month
			add = 1
		}
		trigger_event = {
			id = tentacleswarm_pregnancy.0007
			months = 1
		}
	}
}
tentacleswarm_pregnancy.0007 = { #第七月触手分娩
	hidden = yes
	immediate = {
		change_variable = {
			name = tentacle_pregnancy_month
			add = 1
		}
		trigger_event = {
			id = tentacleswarm_pregnancy.4001
		}
	}
}
#生育事件
tentacleswarm_pregnancy.4001 = {
	type = character_event
	title = tentacleswarm_slave.4001.t
	desc =  {
		first_valid = {
			triggered_desc = {
				trigger = {
					is_tentacle_slave = yes
				}
				desc = tentacleswarm_slave.4001.desc1
			}
			triggered_desc = {
				trigger = {
					always = yes
				}
				desc = tentacleswarm_slave.4001.desc2
			}
		}
	}
	theme = seduction
	left_portrait = this
	
	widget = {
		gui = "event_window_widget_scheme"
		container = "custom_widgets_container"
	}
	trigger = {
		is_female = yes
		is_tentacle_pregnant = yes
	}
	immediate = {
		#确认通知的配偶
		if = {
			limit = {
				exists = primary_partner
			}
			primary_partner = {
				save_scope_as = spouse
			}
		}
	}

	option = {
		name = tentacleswarm_slave.4001.default
		#结束妊娠
		tentacle_end_pregnancy = yes
		
		#告知配偶
		if = {
			limit = {
				exists = scope:spouse
			}
			if = { #如果你信奉,配偶得到通知
				limit = {
					has_religion = religion:tentacleswarm_religion
				}
				#还没做
			}
			else = { #否则，配偶认为是流产
				scope:spouse = { trigger_event = pregnancy.2102 }
			}
		}

	}
}