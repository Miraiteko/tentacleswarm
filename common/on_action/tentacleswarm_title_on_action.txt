#头衔转换相关设置，用于检测是否应该变化纹章 

on_rank_up = {#角色升级：处理创建新头衔的情况
	on_actions = { 
	}
}
on_character_culture_change = {#角色改变文化：避免改文化的时候把腐化纹章盖掉
	on_actions = { 
		tentacleswarm_on_character_coa_change 
	}
}
on_faith_created = {#角色改变宗教：处理改信天灾或者改回去的情况
	on_actions = { 
		tentacleswarm_on_character_coa_change 
	}
}
on_character_faith_change = {#角色改变宗教：处理改信天灾或者改回去的情况
	on_actions = { 
		tentacleswarm_on_character_coa_change
	}
}
tentacleswarm_on_character_coa_change = { #检查一个角色的所有头衔的coa
	effect = {
		tentacleswarm_character_coa_check = yes #这个东西的触发有一天的延迟，推测是p社把头衔结算放在宗教结算的后面，导致再结算头衔要到第二天
	}
}


on_title_destroyed = { #头衔被摧毁，coa腐化消失
	on_actions = { 
		tentacleswarm_on_title_coa_change
	}
}
on_title_gain = { #头衔被获得，按获得者的情况调整coa
	on_actions = { 
		delay = { days = 1 }#问题：刚创建的新头衔有时没有coa，会导致无coa的头衔被储存;需要delay一天
		tentacleswarm_on_title_coa_change
	}
}
on_explicit_claim_gain = { #头衔被获得，按获得者的情况调整coa
	on_actions = { 
		tentacleswarm_on_title_coa_change
	}
}
on_baron_found_or_created_for_title = { #男爵头衔被分配，按获得者的情况调整coa
	on_actions = { 
		tentacleswarm_on_title_coa_change
	}
}
tentacleswarm_on_title_coa_change = { #检查单个头衔的coa
	effect = {
		if = {
			limit = { 
				exists = scope:title 
				scope:title  = { 
					tier > tier_barony 
					is_landless_type_title = no
				}
			}
			scope:title = {
				tentacleswarm_title_coa_check = yes
			}
		}
		if = { #被摧毁的头衔，失去法律
			limit = {
				exists = scope:title 
				NOT = { exists = scope:title.holder }
				tier >= tier_duchy
				has_title_law = tentacleswarm_elective_succession_law
			}
			remove_title_law = tentacleswarm_elective_succession_law
		}
	}
}
#目前还遗漏了因为改宗教驱逐主教而获得的神殿
